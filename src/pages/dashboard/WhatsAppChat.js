import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState, useEffect } from "react";
import { Tabs, TabsContent, TabsList, TabsTrigger, } from "@/components/ui/tabs";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { PhoneIcon, BookOpenIcon } from "lucide-react";
export default function WhatsAppChat() {
    const [activeTab, setActiveTab] = useState("setup");
    const [agentStatus, setAgentStatus] = useState("draft");
    const [userCount, setUserCount] = useState(0);
    const [messageCount, setMessageCount] = useState(0);
    const [responseRate, setResponseRate] = useState(0);
    const [phoneNumber, setPhoneNumber] = useState("");
    const [loading, setLoading] = useState(true);
    useEffect(() => {
        // Simulate loading data
        const timeout = setTimeout(() => {
            // Check if WhatsApp chat is deployed (simulate from localStorage)
            const isDeployed = localStorage.getItem("whatsapp_chat_deployed") === "true";
            if (isDeployed) {
                setAgentStatus("active");
                setUserCount(128);
                setMessageCount(546);
                setResponseRate(94);
                setPhoneNumber("+1 (555) 123-4567");
            }
            setLoading(false);
        }, 1000);
        return () => clearTimeout(timeout);
    }, []);
    const handleConnect = () => {
        setLoading(true);
        // Simulate deployment process
        setTimeout(() => {
            setAgentStatus("active");
            setUserCount(1);
            setMessageCount(0);
            setResponseRate(0);
            localStorage.setItem("whatsapp_chat_deployed", "true");
            setLoading(false);
        }, 1500);
    };
    return (_jsxs("div", { className: "container mx-auto py-6 space-y-8", children: [_jsxs("div", { className: "flex flex-col space-y-2", children: [_jsx("h1", { className: "text-3xl font-bold tracking-tight", children: "WhatsApp Chat Agent" }), _jsx("p", { className: "text-muted-foreground", children: "Connect your business WhatsApp number to an AI-powered assistant that responds to customer inquiries 24/7." })] }), _jsxs("div", { className: "grid gap-4 md:grid-cols-2 lg:grid-cols-2", children: [_jsxs(Card, { children: [_jsxs(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: [_jsx(CardTitle, { className: "text-sm font-medium", children: "WhatsApp Integration" }), _jsxs("div", { className: "flex items-center gap-2", children: [agentStatus === "draft" && (_jsx(Badge, { variant: "outline", className: "bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-200 hover:bg-amber-100 hover:dark:bg-amber-900/30", children: "Not Deployed" })), agentStatus === "active" && (_jsx(Badge, { variant: "outline", className: "bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 hover:bg-green-100 hover:dark:bg-green-900/30", children: "Deployed" }))] })] }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: "WhatsApp Business API" }), agentStatus === "active" && (_jsxs("div", { className: "text-xs text-muted-foreground", children: ["Connected to: ", phoneNumber] })), _jsxs("div", { className: "mt-4 grid grid-cols-3 gap-2", children: [_jsxs("div", { className: "col-span-1", children: [_jsx("div", { className: "text-xs text-muted-foreground", children: "Users" }), _jsx("div", { className: "text-xl font-bold", children: userCount })] }), _jsxs("div", { className: "col-span-1", children: [_jsx("div", { className: "text-xs text-muted-foreground", children: "Messages" }), _jsx("div", { className: "text-xl font-bold", children: messageCount })] }), _jsxs("div", { className: "col-span-1", children: [_jsx("div", { className: "text-xs text-muted-foreground", children: "Response Rate" }), _jsxs("div", { className: "text-xl font-bold", children: [responseRate, "%"] })] })] })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "flex flex-row items-center justify-between space-y-0 pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium", children: "WhatsApp Preview" }) }), _jsx(CardContent, { children: _jsx("div", { className: "rounded-lg border bg-muted p-3 dark:bg-muted/50", children: _jsxs("div", { className: "flex flex-col space-y-3", children: [_jsxs("div", { className: "flex items-start space-x-3", children: [_jsx("div", { className: "rounded-full bg-primary/10 p-2", children: _jsx(PhoneIcon, { className: "h-4 w-4 text-primary" }) }), _jsx("div", { className: "rounded-lg bg-muted-foreground/20 p-2", children: _jsx("p", { className: "text-sm", children: "Hi, I'm interested in your product. Can you tell me more?" }) })] }), _jsx("div", { className: "flex items-start justify-end space-x-3", children: _jsx("div", { className: "rounded-lg bg-primary p-2", children: _jsx("p", { className: "text-sm text-primary-foreground", children: "Hello! I'd be happy to tell you more about our products. What specific information are you looking for?" }) }) })] }) }) })] })] }), _jsx("div", { className: "mt-6", children: _jsxs(Tabs, { defaultValue: "setup", value: activeTab, onValueChange: setActiveTab, children: [_jsxs(TabsList, { className: "mb-4", children: [_jsx(TabsTrigger, { value: "setup", children: "Setup" }), _jsx(TabsTrigger, { value: "analytics", children: "Analytics" }), _jsx(TabsTrigger, { value: "whatsapp-business", children: "WhatsApp Business Setup" })] }), _jsx(TabsContent, { value: "setup", children: _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "Connect Your WhatsApp Business Account" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsxs("div", { className: "space-y-2", children: [_jsx(Label, { htmlFor: "phoneNumber", children: "WhatsApp Business Phone Number" }), _jsx(Input, { id: "phoneNumber", placeholder: "+1 (555) 123-4567", value: phoneNumber, onChange: (e) => setPhoneNumber(e.target.value), disabled: agentStatus === "active" }), _jsx("p", { className: "text-sm text-muted-foreground", children: "Enter the phone number associated with your WhatsApp Business account." })] }), _jsxs("div", { className: "space-y-2", children: [_jsx(Label, { htmlFor: "webhook", children: "Webhook URL" }), _jsxs("div", { className: "flex items-center space-x-2", children: [_jsx(Input, { id: "webhook", value: "https://api.yourdomain.com/webhooks/whatsapp", readOnly: true }), _jsx(Button, { variant: "outline", size: "sm", children: "Copy" })] }), _jsx("p", { className: "text-sm text-muted-foreground", children: "Use this webhook URL in your WhatsApp Business API settings." })] }), _jsx("div", { className: "pt-4", children: _jsx(Button, { onClick: handleConnect, disabled: loading || agentStatus === "active" || !phoneNumber, children: loading ? "Connecting..." : agentStatus === "active" ? "Connected" : "Connect WhatsApp" }) })] })] }) }), _jsx(TabsContent, { value: "analytics", children: _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "WhatsApp Engagement" }) }), _jsx(CardContent, { children: _jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium", children: "Total Users" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: userCount }), _jsx("p", { className: "text-xs text-muted-foreground", children: "+12% from last month" })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium", children: "Total Messages" }) }), _jsxs(CardContent, { children: [_jsx("div", { className: "text-2xl font-bold", children: messageCount }), _jsx("p", { className: "text-xs text-muted-foreground", children: "+24% from last month" })] })] }), _jsxs(Card, { children: [_jsx(CardHeader, { className: "pb-2", children: _jsx(CardTitle, { className: "text-sm font-medium", children: "Response Rate" }) }), _jsxs(CardContent, { children: [_jsxs("div", { className: "text-2xl font-bold", children: [responseRate, "%"] }), _jsx("p", { className: "text-xs text-muted-foreground", children: "+3% from last month" })] })] })] }), _jsxs("div", { className: "rounded-lg border p-4", children: [_jsx("h3", { className: "text-sm font-medium mb-2", children: "Common User Inquiries" }), _jsxs("div", { className: "space-y-2", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-sm", children: "Product Information" }), _jsx("span", { className: "text-sm font-medium", children: "42%" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-sm", children: "Order Status" }), _jsx("span", { className: "text-sm font-medium", children: "28%" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-sm", children: "Support Issues" }), _jsx("span", { className: "text-sm font-medium", children: "18%" })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-sm", children: "Pricing Questions" }), _jsx("span", { className: "text-sm font-medium", children: "12%" })] })] })] })] }) })] }) }), _jsx(TabsContent, { value: "whatsapp-business", children: _jsxs(Card, { children: [_jsx(CardHeader, { children: _jsx(CardTitle, { children: "WhatsApp Business Setup Guide" }) }), _jsxs(CardContent, { className: "space-y-4", children: [_jsxs("div", { className: "space-y-2", children: [_jsx("h3", { className: "font-medium", children: "Step 1: Register for WhatsApp Business API" }), _jsx("p", { className: "text-sm text-muted-foreground", children: "Visit the Meta Business Platform to register your business for the WhatsApp Business API." })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("h3", { className: "font-medium", children: "Step 2: Set Up Webhooks" }), _jsxs("p", { className: "text-sm text-muted-foreground", children: ["Configure your WhatsApp Business API to use our webhook URL:", _jsx("code", { className: "text-xs bg-muted px-1 py-0.5 rounded ml-1", children: "https://api.yourdomain.com/webhooks/whatsapp" })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("h3", { className: "font-medium", children: "Step 3: Configure Message Templates" }), _jsx("p", { className: "text-sm text-muted-foreground", children: "Create and submit message templates for approval in the WhatsApp Business Manager." })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("h3", { className: "font-medium", children: "Step 4: Test Your Integration" }), _jsx("p", { className: "text-sm text-muted-foreground", children: "Send a test message to your WhatsApp Business number to verify the integration." })] }), _jsx("div", { className: "pt-2", children: _jsxs(Button, { variant: "outline", children: [_jsx(BookOpenIcon, { className: "mr-2 h-4 w-4" }), "View Full Documentation"] }) })] })] }) })] }) })] }));
}
